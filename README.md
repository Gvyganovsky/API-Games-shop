# Проект: Игровая платформа

## Описание

Это API для управления игровыми заказами, пользователями и играми на платформе. Реализовано на основе фреймворка **Yii2** с использованием паттерна RESTful. Включает основные функции регистрации пользователей, входа в систему, создания, получения, обновления и удаления игр, а также оформления и удаления заказов.

Проект предоставляет интерфейс для взаимодействия с базой данных, где хранятся пользователи, игры и их заказы. Это идеальная база для создания полноценной системы для онлайн-магазина игр.

## Структура проекта

- **app/controllers**: Контроллеры для работы с данными.
  - **GamesController** — Управление играми (создание, удаление, обновление).
  - **OrdersController** — Управление заказами (создание, удаление).
  - **UserController** — Управление пользователями (регистрация, авторизация).
  
- **app/models**: Модели для работы с данными.
  - **Games** — Модель игры.
  - **Orders** — Модель заказа.
  - **Users** — Модель пользователя.

## Особенности

- **Регистрация пользователей**: Система поддерживает регистрацию пользователей с валидацией данных.
- **Авторизация**: После входа пользователи получают токен для доступа к защищённым маршрутам.
- **Управление играми**: Администраторы могут добавлять, удалять и редактировать игры.
- **Заказы**: Пользователи могут оформлять и удалять заказы на игры.
- **Токены**: Для доступа к защищённым ресурсам используется Bearer токен, что обеспечивает безопасность.

## Установка

### Требования

- PHP >= 7.4
- MySQL или другая СУБД
- Yii2 framework

### Установка зависимостей

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/username/project-name.git
   cd project-name
   ```


Установите зависимости с помощью Composer:

```bash
composer install
```


Настройте базу данных:

Создайте базу данных и настройте её параметры в файле .env (или config/db.php, в зависимости от структуры проекта).

Примените миграции для создания таблиц:

```bash
php yii migrate
```

Запустите сервер:

```bash
php yii serve
```

Теперь API будет доступен по адресу http://localhost:8080.

Использование API
Регистрация пользователя

POST /api/user/create

Запрос:

```json
{
  "email": "user@example.com",
  "password": "password123",
  "name": "John Doe"
}
```

Ответ:

```json
{
  "status": 201,
  "message": "User successfully registered"
}
```

Вход в систему

POST /api/user/login

Запрос:

```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

Ответ:

```json
{
  "status": 200,
  "message": "Login successful",
  "token": "your_generated_token"
}
```

Получить информацию о пользователе

GET /api/user/{id_user}

Запрос (с токеном авторизации в заголовке):

Authorization: Bearer your_generated_token


Ответ:

```json
{
  "status": 200,
  "user": {
    "id_user": 1,
    "email": "user@example.com",
    "name": "John Doe"
  }
}
```

Получить все заказы пользователя

GET /api/user/orders/{id_user}

Ответ:

```json
{
  "status": 200,
  "orders": [
    {
      "id_order": 1,
      "game_id": 5,
      "user_id": 1
    }
  ]
}
```

Создание заказа

POST /api/orders/add/{id_game}

Запрос:

```json
{
  "game_id": 5
}
```

Ответ:

```json
{
  "status": 200,
  "message": "Game successfully purchased"
}
```

Удаление заказа

DELETE /api/orders/delete/{order_id}

Ответ:

```json
{
  "status": 200,
  "message": "Order successfully deleted"
}
```

Логирование и ошибки

Все ошибки в процессе выполнения API логируются в файлы. Для дебага и поиска причин ошибок можно ознакомиться с логами в директории runtime/logs.

Примечания

Все запросы и ответы используют формат JSON.

Для аутентификации используется токен, который передается в заголовке Authorization: Bearer {token}.

Вся система поддерживает механизмы обработки ошибок с четкими статусами и сообщениями
